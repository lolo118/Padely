<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Padely - Tu Mundo de Pádel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c111c;
        }
        .modal-overlay {
            transition: opacity 0.3s ease-in-out;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }

        .nav-link {
            transition: all 0.2s ease-in-out;
        }
        .nav-link.active, .nav-link:hover {
            background-color: #ef4444;
            color: white;
        }
        .page-content {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .tab-active {
            background-color: #374151;
            border-color: #ef4444 !important;
            color: white;
        }
        .tournament-card {
            background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
            border: 1px solid #4b5563;
        }
    </style>
</head>
<body class="text-gray-300">
    <div class="flex h-screen bg-gray-900">
        <!-- Barra de Navegación Lateral -->
        <aside class="w-64 flex-shrink-0 bg-gray-800 p-4 flex flex-col justify-between">
            <div>
                <div class="text-center mb-10">
                    <h1 class="text-3xl font-extrabold text-white tracking-tight">Padely</h1>
                    <p class="text-gray-400 text-sm">Tu Mundo de Pádel</p>
                </div>
                <nav class="space-y-2">
                    <a href="#" data-page="home" class="nav-link active flex items-center px-4 py-2 rounded-lg">
                        <i class="fas fa-home w-6 text-center"></i>
                        <span class="ml-3">Inicio</span>
                    </a>
                    <a href="#" data-page="tournaments" class="nav-link flex items-center px-4 py-2 rounded-lg">
                        <i class="fas fa-trophy w-6 text-center"></i>
                        <span class="ml-3">Torneos</span>
                    </a>
                    <a href="#" data-page="bookings" class="nav-link flex items-center px-4 py-2 rounded-lg">
                        <i class="fas fa-calendar-alt w-6 text-center"></i>
                        <span class="ml-3">Turnos</span>
                    </a>
                    <a href="#" data-page="challenges" class="nav-link flex items-center px-4 py-2 rounded-lg">
                        <i class="fas fa-fist-raised w-6 text-center"></i>
                        <span class="ml-3">Desafíos</span>
                    </a>
                    <a href="#" data-page="forum" class="nav-link flex items-center px-4 py-2 rounded-lg">
                        <i class="fas fa-comments w-6 text-center"></i>
                        <span class="ml-3">Foro</span>
                    </a>
                    <a href="#" data-page="marketplace" class="nav-link flex items-center px-4 py-2 rounded-lg">
                        <i class="fas fa-store w-6 text-center"></i>
                        <span class="ml-3">Marketplace</span>
                    </a>
                </nav>
            </div>
            <div class="text-center">
                 <button id="admin-login-btn" class="w-full bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors text-sm mb-2">
                    <i class="fas fa-user-shield mr-2"></i>Acceso Administrador
                </button>
                <button id="logout-btn" class="hidden w-full bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm mb-2">
                    <i class="fas fa-sign-out-alt mr-2"></i>Cerrar Sesión Admin
                </button>
                <p class="text-gray-500 text-xs">&copy; 2025 Padely.</p>
            </div>
        </aside>

        <!-- Contenido Principal -->
        <main class="flex-1 overflow-y-auto p-4 md:p-8">
            
            <!-- PAGINA: INICIO -->
            <div id="page-home" class="page-content">
                <h2 class="text-4xl font-bold text-white mb-8">Inicio</h2>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    
                    <!-- Columna Principal (Noticias y Torneos) -->
                    <div class="lg:col-span-2 space-y-8">
                        
                        <!-- Sección de Noticias/Novedades -->
                        <div>
                            <h3 class="text-2xl font-semibold text-white mb-4">Novedades y Anuncios</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Noticia Principal -->
                                <div class="md:col-span-2 bg-gray-800 rounded-lg overflow-hidden shadow-lg hover:shadow-red-500/20 transition-shadow duration-300">
                                    <div class="bg-gray-700 h-56 w-full flex items-center justify-center text-gray-500">
                                        <i class="fas fa-image text-4xl"></i>
                                    </div>
                                    <div class="p-6">
                                        <h4 class="font-bold text-xl text-white mb-2">¡Nueva Apertura de Canchas Panorámicas!</h4>
                                        <p class="text-gray-400 mb-4">
                                            Estamos emocionados de anunciar la inauguración de nuestras 3 nuevas canchas panorámicas. Ven a probar la mejor experiencia de pádel.
                                        </p>
                                        <a href="#" class="text-red-500 hover:text-red-400 font-semibold">Leer más &rarr;</a>
                                    </div>
                                </div>
                                <!-- Noticia Secundaria 1 -->
                                <div class="bg-gray-800 rounded-lg p-6 shadow-lg hover:shadow-red-500/20 transition-shadow duration-300">
                                    <h4 class="font-bold text-lg text-white mb-2">Clases de Perfeccionamiento con Pro</h4>
                                    <p class="text-gray-400 text-sm mb-3">
                                       Mejora tu víbora y bandeja con nuestras nuevas clases grupales.
                                    </p>
                                    <a href="#" class="text-red-500 hover:text-red-400 font-semibold text-sm">Inscríbete</a>
                                </div>
                                <!-- Noticia Secundaria 2 -->
                                <div class="bg-gray-800 rounded-lg p-6 shadow-lg hover:shadow-red-500/20 transition-shadow duration-300">
                                    <h4 class="font-bold text-lg text-white mb-2">Liga Interna de Verano</h4>
                                    <p class="text-gray-400 text-sm mb-3">
                                       Anotate en la liga de verano y compite para ser el mejor del club.
                                    </p>
                                    <a href="#" class="text-red-500 hover:text-red-400 font-semibold text-sm">Más Info</a>
                                </div>
                            </div>
                        </div>

                        <!-- Sección de Torneos Activos -->
                        <div>
                            <h3 class="text-2xl font-semibold text-white mb-4">Torneos Activos</h3>
                            <div class="space-y-4">
                                <!-- Torneo 1 -->
                                <div class="bg-gray-800 rounded-lg p-4 flex justify-between items-center shadow-lg hover:shadow-red-500/20 transition-shadow duration-300">
                                    <div>
                                        <p class="font-bold text-white">Torneo Americano 5ta Categoría</p>
                                        <p class="text-sm text-gray-400"><i class="fas fa-calendar-alt mr-2"></i>Finaliza en 3 días</p>
                                    </div>
                                    <a href="#" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm font-semibold">Ver Cuadros</a>
                                </div>
                                <!-- Torneo 2 -->
                                <div class="bg-gray-800 rounded-lg p-4 flex justify-between items-center shadow-lg hover:shadow-red-500/20 transition-shadow duration-300">
                                    <div>
                                        <p class="font-bold text-white">Torneo Femenino C</p>
                                        <p class="text-sm text-gray-400"><i class="fas fa-calendar-alt mr-2"></i>Inscripciones abiertas</p>
                                    </div>
                                    <a href="#" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-semibold">Inscribirse</a>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- Columna Lateral (Turnos Libres) -->
                    <div class="lg:col-span-1">
                        <div class="bg-gray-800 rounded-lg p-6 shadow-lg">
                            <h3 class="text-2xl font-semibold text-white mb-4">Turnos Libres Hoy</h3>
                            <div class="space-y-4">
                                <!-- Turno 1 -->
                                <div class="bg-gray-900 rounded-md p-3 flex justify-between items-center">
                                    <div>
                                        <p class="font-semibold text-white">Cancha 1 (Cristal)</p>
                                        <p class="text-sm text-green-400">Ahora: 12:00 PM</p>
                                    </div>
                                    <a href="#" class="bg-green-600 text-white px-3 py-1 rounded-md hover:bg-green-700 text-xs font-bold">RESERVAR</a>
                                </div>
                                <!-- Turno 2 -->
                                <div class="bg-gray-900 rounded-md p-3 flex justify-between items-center">
                                    <div>
                                        <p class="font-semibold text-white">Cancha 3 (Cemento)</p>
                                        <p class="text-sm text-gray-300">Próximo: 13:30 PM</p>
                                    </div>
                                    <a href="#" class="bg-gray-600 text-white px-3 py-1 rounded-md hover:bg-gray-700 text-xs font-bold">RESERVAR</a>
                                </div>
                                <!-- Turno 3 -->
                                <div class="bg-gray-900 rounded-md p-3 flex justify-between items-center">
                                    <div>
                                        <p class="font-semibold text-white">Cancha 2 (Panorámica)</p>
                                        <p class="text-sm text-gray-300">Próximo: 15:00 PM</p>
                                    </div>
                                    <a href="#" class="bg-gray-600 text-white px-3 py-1 rounded-md hover:bg-gray-700 text-xs font-bold">RESERVAR</a>
                                </div>
                                 <!-- Turno 4 -->
                                <div class="bg-gray-900 rounded-md p-3 flex justify-between items-center">
                                    <div>
                                        <p class="font-semibold text-white">Cancha 1 (Cristal)</p>
                                        <p class="text-sm text-gray-300">Próximo: 16:30 PM</p>
                                    </div>
                                    <a href="#" class="bg-gray-600 text-white px-3 py-1 rounded-md hover:bg-gray-700 text-xs font-bold">RESERVAR</a>
                                </div>
                            </div>
                            <button class="w-full mt-6 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors">Ver todos los turnos</button>
                        </div>
                    </div>

                </div>
            </div>

            <!-- PAGINA: TORNEOS (Contenido anterior movido aquí) -->
            <div id="page-tournaments" class="page-content hidden">
                <div id="app" class="container mx-auto max-w-7xl">
                    <!-- Header -->
                    <header class="bg-gray-800/50 backdrop-blur-sm border border-gray-700 shadow-lg rounded-xl p-4 md:p-6 mb-8">
                        <div class="flex flex-col md:flex-row justify-between items-center">
                            <div class="text-center md:text-left mb-4 md:mb-0">
                                <h1 class="text-2xl md:text-4xl font-extrabold text-white tracking-tight">Gestor de Torneos</h1>
                                <p id="tournament-title" class="text-gray-400 text-sm md:text-base mt-1">Cargando torneo...</p>
                            </div>
                            <div class="mt-4 w-full md:w-1/3">
                                <div class="relative">
                                    <input type="text" id="player-search" placeholder="Buscar jugador por apellido..." 
                                           class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-red-500">
                                    <i class="fas fa-search absolute right-3 top-3 text-gray-400"></i>
                                </div>
                            </div>
                        </div>
                    </header>
            
                    <!-- Main Content -->
                    <main id="content-area">
                        <!-- Tournament Overview -->
                        <section id="tournament-overview" class="mb-8">
                            <div class="tournament-card rounded-xl p-6 shadow-lg">
                                <div class="flex flex-col md:flex-row justify-between items-center">
                                    <div>
                                        <h2 class="text-2xl font-bold text-white" id="overview-tournament-name">Torneo de Pádel</h2>
                                        <div class="flex flex-wrap gap-4 mt-2 text-sm">
                                            <div class="flex items-center">
                                                <i class="fas fa-calendar-alt w-4 h-4 mr-2 text-gray-400"></i>
                                                <span id="overview-date" class="text-gray-300">Fecha por definir</span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-users w-4 h-4 mr-2 text-gray-400"></i>
                                                <span id="overview-teams" class="text-gray-300">0 parejas</span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-th w-4 h-4 mr-2 text-gray-400"></i>
                                                <span id="overview-courts" class="text-gray-300">0 canchas</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-4 md:mt-0 flex space-x-4">
                                        <div class="bg-gray-800 rounded-lg p-3 text-center">
                                            <div class="text-2xl font-bold text-white" id="overview-groups">0</div>
                                            <div class="text-xs text-gray-400">Grupos</div>
                                        </div>
                                        <div class="bg-gray-800 rounded-lg p-3 text-center">
                                            <div class="text-2xl font-bold text-white" id="overview-matches">0</div>
                                            <div class="text-xs text-gray-400">Partidos</div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Progress Bar -->
                                <div class="mt-4">
                                    <div class="flex justify-between text-sm text-gray-400 mb-1">
                                        <span>Progreso del Torneo</span>
                                        <span id="tournament-progress-text">0%</span>
                                    </div>
                                    <div class="w-full bg-gray-700 rounded-full h-2">
                                        <div id="tournament-progress-bar" class="bg-red-500 h-2 rounded-full" style="width: 0%; transition: width 0.5s ease;"></div>
                                    </div>
                                </div>
                            </div>
                        </section>
            
                        <!-- Navigation Tabs -->
                        <div class="border-b border-gray-700 mb-6">
                            <nav class="flex -mb-px" id="main-tabs">
                                <button data-tab="groups" class="tab-button tab-active mobile-tab py-2 px-4 font-medium text-sm border-b-2">
                                    <i class="fas fa-users mr-2"></i>Grupos
                                </button>
                                <button data-tab="schedule" class="tab-button mobile-tab py-2 px-4 font-medium text-sm border-b-2 border-transparent text-gray-400 hover:text-white">
                                    <i class="fas fa-calendar-alt mr-2"></i>Partidos
                                </button>
                                <button data-tab="ranking" class="tab-button mobile-tab py-2 px-4 font-medium text-sm border-b-2 border-transparent text-gray-400 hover:text-white">
                                    <i class="fas fa-chart-line mr-2"></i>Clasificación
                                </button>
                            </nav>
                        </div>
            
                        <!-- Tab Contents -->
                        <div id="tab-content">
                            <div id="tab-content-groups" class="tab-inner-content">
                                <div id="groups-grid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"></div>
                            </div>
                            <div id="tab-content-schedule" class="tab-inner-content hidden">
                                <div id="schedule-container" class="space-y-3"></div>
                            </div>
                            <div id="tab-content-ranking" class="tab-inner-content hidden">
                                <div class="overflow-x-auto bg-gray-800 rounded-xl p-4">
                                    <table class="min-w-full divide-y divide-gray-700">
                                        <thead>
                                            <tr>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">#</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Pareja</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Grupo</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">PJ</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">PG</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">PP</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">DG</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Pts</th>
                                            </tr>
                                        </thead>
                                        <tbody id="ranking-body" class="divide-y divide-gray-700"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </main>
            
                    <!-- Admin View -->
                    <div id="admin-view" class="hidden mt-8">
                        <div class="bg-gray-800/50 border border-gray-700 rounded-xl p-6">
                            <h2 class="text-2xl font-bold mb-6 text-center text-white">Panel de Administrador</h2>
                            <!-- Admin Tabs -->
                             <div class="border-b border-gray-700 mb-6">
                                <nav class="flex -mb-px" id="admin-tabs">
                                    <button data-tab="tournament" class="tab-button tab-active mobile-tab py-2 px-4 font-medium text-sm border-b-2"><i class="fas fa-cog mr-2"></i>Torneo</button>
                                    <button data-tab="players" class="tab-button mobile-tab py-2 px-4 font-medium text-sm border-b-2 border-transparent text-gray-400 hover:text-white"><i class="fas fa-users mr-2"></i>Parejas</button>
                                    <button data-tab="matches" class="tab-button mobile-tab py-2 px-4 font-medium text-sm border-b-2 border-transparent text-gray-400 hover:text-white"><i class="fas fa-calendar-alt mr-2"></i>Partidos</button>
                                </nav>
                            </div>
                            
                            <!-- Admin Tournament Tab -->
                            <div id="admin-tab-content-tournament" class="tab-inner-content">
                                <!-- Tournament Settings Form -->
                                <div class="bg-gray-900 border border-gray-700 p-4 rounded-lg mb-6">
                                    <h3 class="text-xl font-bold mb-4 text-white">Información General</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-1">Nombre del Torneo</label>
                                            <input type="text" id="tournament-name" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-red-500">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-1">Fecha</label>
                                            <input type="date" id="tournament-date" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-red-500">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-1">Cantidad de Canchas</label>
                                            <input type="number" id="court-count" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-red-500" min="1" max="10" value="4">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-1">Cantidad de Grupos</label>
                                            <select id="group-count" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-red-500">
                                                <option value="4">4 Grupos</option>
                                                <option value="6">6 Grupos</option>
                                                <option value="8" selected>8 Grupos</option>
                                            </select>
                                        </div>
                                        <div class="md:col-span-2">
                                            <button id="save-tournament-settings" class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition-colors">Guardar Configuración</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-gray-900 border border-gray-700 p-4 rounded-lg">
                                    <h3 class="text-xl font-bold mb-4 text-white">Acciones del Torneo</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <button id="generate-groups" class="bg-yellow-600 text-white font-bold py-3 rounded-lg hover:bg-yellow-700 transition-colors"><i class="fas fa-random mr-2"></i>Generar Grupos y Partidos</button>
                                        <button id="reset-tournament" class="bg-red-600 text-white font-bold py-3 rounded-lg hover:bg-red-700 transition-colors"><i class="fas fa-trash-alt mr-2"></i>Reiniciar Torneo</button>
                                    </div>
                                </div>
                            </div>
                            
                             <!-- Admin Players Tab -->
                            <div id="admin-tab-content-players" class="tab-inner-content hidden">
                                <div class="bg-gray-900 border border-gray-700 p-4 rounded-lg mb-6">
                                    <h3 class="text-xl font-bold mb-4 text-white">Agregar Nueva Pareja</h3>
                                    <form id="add-player-form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <input type="text" id="player1-name" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white" placeholder="Jugador 1 (Apellido, Nombre)" required>
                                        <input type="text" id="player2-name" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white" placeholder="Jugador 2 (Apellido, Nombre)" required>
                                        <input type="text" id="team-name" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white" placeholder="Nombre de Pareja" required>
                                        <select id="player-group" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white">
                                            <option value="">Asignar a Grupo (Opcional)</option>
                                        </select>
                                        <div class="md:col-span-2">
                                            <button type="submit" class="w-full bg-green-600 text-white font-bold py-3 rounded-lg hover:bg-green-700 transition-colors"><i class="fas fa-plus-circle mr-2"></i>Agregar Pareja</button>
                                        </div>
                                    </form>
                                </div>
                                <div class="bg-gray-900 border border-gray-700 p-4 rounded-lg">
                                     <h3 class="text-xl font-bold mb-4 text-white">Parejas Registradas</h3>
                                     <div id="players-list" class="space-y-3"></div>
                                </div>
                            </div>

                            <!-- Admin Matches Tab -->
                            <div id="admin-tab-content-matches" class="tab-inner-content hidden">
                                 <div id="admin-matches-container" class="space-y-4"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PAGINA: TURNOS -->
            <div id="page-bookings" class="page-content hidden">
                <h2 class="text-4xl font-bold text-white mb-6">Reserva de Turnos</h2>
                <p class="text-lg text-gray-400">Esta sección está en construcción. Próximamente podrás reservar canchas desde aquí.</p>
            </div>

            <!-- PAGINA: DESAFIOS -->
            <div id="page-challenges" class="page-content hidden">
                <h2 class="text-4xl font-bold text-white mb-6">Desafíos</h2>
                <p class="text-lg text-gray-400">Esta sección está en construcción. Próximamente podrás desafiar a otras parejas.</p>
            </div>

            <!-- PAGINA: FORO -->
            <div id="page-forum" class="page-content hidden">
                <h2 class="text-4xl font-bold text-white mb-6">Foro de la Comunidad</h2>
                <p class="text-lg text-gray-400">Esta sección está en construcción. Próximamente podrás participar en debates y conversaciones.</p>
            </div>

            <!-- PAGINA: MARKETPLACE -->
            <div id="page-marketplace" class="page-content hidden">
                <h2 class="text-4xl font-bold text-white mb-6">Marketplace</h2>
                <p class="text-lg text-gray-400">Esta sección está en construcción. Próximamente podrás comprar y vender artículos de pádel.</p>
            </div>

        </main>
    </div>

    <!-- Admin Login Modal -->
    <div id="login-modal" class="modal-overlay fixed inset-0 bg-black/80 flex items-center justify-center p-4 hidden">
        <div class="bg-gray-800 border border-gray-700 rounded-xl shadow-2xl p-8 w-full max-w-sm relative">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors">&times;</button>
            <h2 class="text-2xl font-bold text-center mb-2 text-white">Acceso Admin</h2>
            <p class="text-center text-gray-400 mb-6">Ingresa tus credenciales.</p>
            <form id="login-form">
                <div class="mb-4">
                    <label for="username" class="block text-sm font-medium text-gray-300 mb-1">Usuario</label>
                    <input type="text" id="username" name="username" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white" required>
                </div>
                <div class="mb-6">
                    <label for="password" class="block text-sm font-medium text-gray-300 mb-1">Contraseña</label>
                    <input type="password" id="password" name="password" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white" required>
                </div>
                <p id="login-error" class="text-red-500 text-sm text-center mb-4 hidden">Usuario o contraseña incorrectos.</p>
                <button type="submit" class="w-full bg-red-600 text-white font-bold py-3 rounded-lg hover:bg-red-700 transition-transform transform hover:scale-105">
                    <i class="fas fa-sign-in-alt mr-2"></i>Ingresar
                </button>
            </form>
        </div>
    </div>
    
<script>
document.addEventListener('DOMContentLoaded', function() {
    
    // =================================================================================
    // 1. NAVEGACIÓN PRINCIPAL
    // =================================================================================
    const navLinks = document.querySelectorAll('.nav-link');
    const pages = document.querySelectorAll('.page-content');

    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const pageId = link.dataset.page;

            pages.forEach(page => {
                page.classList.add('hidden');
            });
            document.getElementById(`page-${pageId}`).classList.remove('hidden');

            navLinks.forEach(nav => nav.classList.remove('active'));
            link.classList.add('active');
        });
    });

    // =================================================================================
    // 2. MÓDULO DE TORNEOS (Código anterior encapsulado)
    // =================================================================================
    
    function initializeTournamentModule() {
        let appState = {
            tournament: {
                name: "Mi Primer Torneo",
                date: new Date().toISOString().split('T')[0],
                courts: 4,
                groups: 8,
            },
            teams: [],
            matches: [],
            isAdmin: false,
        };

        const dom = {
            adminView: document.getElementById('admin-view'),
            tournamentTitle: document.getElementById('tournament-title'),
            overviewName: document.getElementById('overview-tournament-name'),
            overviewDate: document.getElementById('overview-date'),
            overviewTeams: document.getElementById('overview-teams'),
            overviewCourts: document.getElementById('overview-courts'),
            overviewGroups: document.getElementById('overview-groups'),
            overviewMatches: document.getElementById('overview-matches'),
            progressBar: document.getElementById('tournament-progress-bar'),
            progressText: document.getElementById('tournament-progress-text'),
            mainTabs: document.getElementById('main-tabs'),
            adminTabs: document.getElementById('admin-tabs'),
            groupsGrid: document.getElementById('groups-grid'),
            scheduleContainer: document.getElementById('schedule-container'),
            rankingBody: document.getElementById('ranking-body'),
            tournamentNameInput: document.getElementById('tournament-name'),
            tournamentDateInput: document.getElementById('tournament-date'),
            courtCountInput: document.getElementById('court-count'),
            groupCountSelect: document.getElementById('group-count'),
            saveTournamentSettingsBtn: document.getElementById('save-tournament-settings'),
            generateGroupsBtn: document.getElementById('generate-groups'),
            resetTournamentBtn: document.getElementById('reset-tournament'),
            addPlayerForm: document.getElementById('add-player-form'),
            player1NameInput: document.getElementById('player1-name'),
            player2NameInput: document.getElementById('player2-name'),
            teamNameInput: document.getElementById('team-name'),
            playerGroupSelect: document.getElementById('player-group'),
            playersListContainer: document.getElementById('players-list'),
            adminMatchesContainer: document.getElementById('admin-matches-container'),
            adminLoginBtn: document.getElementById('admin-login-btn'),
            logoutBtn: document.getElementById('logout-btn'),
            loginModal: document.getElementById('login-modal'),
            closeModalBtn: document.getElementById('close-modal-btn'),
            loginForm: document.getElementById('login-form'),
            loginError: document.getElementById('login-error')
        };
        
        function renderAll() {
            renderTournamentInfo();
            renderGroups();
            renderSchedule();
            renderRanking();
            renderAdminView();
            updateProgressBar();
        }

        function renderTournamentInfo() {
            const { name, date } = appState.tournament;
            const { teams, courts, groups, matches } = appState;
            dom.tournamentTitle.textContent = name;
            dom.overviewName.textContent = name;
            dom.overviewDate.textContent = date ? new Date(date + 'T00:00:00').toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' }) : "Fecha por definir";
            dom.overviewTeams.textContent = `${teams.length} parejas`;
            dom.overviewCourts.textContent = `${courts} canchas`;
            dom.overviewGroups.textContent = groups;
            dom.overviewMatches.textContent = matches.length;
        }

        function updateProgressBar() {
            const totalMatches = appState.matches.length;
            if (totalMatches === 0) {
                dom.progressBar.style.width = '0%';
                dom.progressText.textContent = '0%';
                return;
            }
            const completedMatches = appState.matches.filter(m => m.completed).length;
            const progress = Math.round((completedMatches / totalMatches) * 100);
            dom.progressBar.style.width = `${progress}%`;
            dom.progressText.textContent = `${progress}%`;
        }
        
        function renderGroups() {
            dom.groupsGrid.innerHTML = '';
            for (let i = 1; i <= appState.tournament.groups; i++) {
                const groupName = `Grupo ${String.fromCharCode(64 + i)}`;
                const groupTeams = appState.teams
                    .filter(t => t.group === groupName)
                    .map(team => calculateTeamStats(team.id))
                    .sort((a, b) => b.points - a.points || b.diff - a.diff);

                const groupCard = document.createElement('div');
                groupCard.className = "bg-gray-800 rounded-xl p-4 shadow-lg border border-gray-700";
                
                let teamsHtml = groupTeams.map((team, index) => `
                    <tr class="border-b border-gray-700 last:border-b-0 hover:bg-gray-700/50">
                        <td class="p-2">${index + 1}</td>
                        <td class="p-2 font-medium text-white">${team.name}</td>
                        <td class="p-2 text-center">${team.played}</td>
                        <td class="p-2 text-center">${team.wins}</td>
                        <td class="p-2 text-center">${team.diff > 0 ? '+' : ''}${team.diff}</td>
                        <td class="p-2 text-center font-bold text-red-400">${team.points}</td>
                    </tr>`).join('');
                if (groupTeams.length === 0) teamsHtml = `<tr><td colspan="6" class="p-4 text-center text-gray-400">Sin parejas.</td></tr>`;

                groupCard.innerHTML = `
                    <h3 class="text-xl font-bold mb-3 text-white text-center">${groupName}</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left">
                            <thead class="bg-gray-700 text-xs text-gray-300 uppercase">
                                <tr>
                                    <th class="p-2">#</th><th class="p-2">Pareja</th><th class="p-2 text-center">PJ</th>
                                    <th class="p-2 text-center">PG</th><th class="p-2 text-center">DG</th><th class="p-2 text-center">Pts</th>
                                </tr>
                            </thead>
                            <tbody>${teamsHtml}</tbody>
                        </table>
                    </div>`;
                dom.groupsGrid.appendChild(groupCard);
            }
        }
        
        function renderSchedule() {
            dom.scheduleContainer.innerHTML = '';
            if (appState.matches.length === 0) {
                dom.scheduleContainer.innerHTML = `<p class="text-center text-gray-400">No hay partidos programados.</p>`;
                return;
            }
            appState.matches.forEach(match => {
                const team1 = findTeamById(match.team1Id);
                const team2 = findTeamById(match.team2Id);
                if (!team1 || !team2) return;

                const card = document.createElement('div');
                card.className = `bg-gray-800 p-4 rounded-lg shadow-md border ${match.completed ? 'border-green-600/50' : 'border-gray-700'}`;
                card.innerHTML = `
                    <div class="flex justify-between items-center text-xs text-gray-400 mb-2">
                        <span>${match.group} - Cancha ${match.court}</span><span>${match.time}</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="text-center w-2/5"><div class="font-bold text-sm md:text-base text-white">${team1.name}</div></div>
                        <div class="text-xl md:text-2xl font-bold text-white px-2">
                            ${match.completed ? `<span class="text-green-400">${match.score1} - ${match.score2}</span>` : '<span class="text-gray-500">vs</span>'}
                        </div>
                        <div class="text-center w-2/5"><div class="font-bold text-sm md:text-base text-white">${team2.name}</div></div>
                    </div>
                    ${match.completed ? `<div class="text-center text-xs mt-2 text-green-500">Finalizado</div>` : ''}`;
                dom.scheduleContainer.appendChild(card);
            });
        }
        
        function renderRanking() {
            const allTeamsStats = appState.teams.map(team => calculateTeamStats(team.id))
                                              .sort((a, b) => b.points - a.points || b.diff - a.diff);
            
            dom.rankingBody.innerHTML = allTeamsStats.map((team, index) => `
                <tr class="hover:bg-gray-700/50">
                    <td class="px-4 py-3 font-bold">${index + 1}</td>
                    <td class="px-4 py-3 text-white font-medium">${team.name}</td>
                    <td class="px-4 py-3">${team.group}</td><td class="px-4 py-3">${team.played}</td>
                    <td class="px-4 py-3 text-green-400">${team.wins}</td><td class="px-4 py-3 text-red-400">${team.losses}</td>
                    <td class="px-4 py-3 font-bold ${team.diff >= 0 ? 'text-green-400' : 'text-red-400'}">${team.diff > 0 ? '+' : ''}${team.diff}</td>
                    <td class="px-4 py-3 text-xl font-extrabold text-red-400">${team.points}</td>
                </tr>`).join('');
        }

        function renderAdminView() {
            if (appState.isAdmin) {
                dom.adminView.classList.remove('hidden');
                dom.adminLoginBtn.classList.add('hidden');
                dom.logoutBtn.classList.remove('hidden');
                dom.tournamentNameInput.value = appState.tournament.name;
                dom.tournamentDateInput.value = appState.tournament.date;
                dom.courtCountInput.value = appState.tournament.courts;
                dom.groupCountSelect.value = appState.tournament.groups;
                renderAdminGroupOptions();
                renderAdminPlayersList();
                renderAdminMatchesForms();
            } else {
                dom.adminView.classList.add('hidden');
                dom.adminLoginBtn.classList.remove('hidden');
                dom.logoutBtn.classList.add('hidden');
            }
        }
        
        function renderAdminGroupOptions() {
            dom.playerGroupSelect.innerHTML = '<option value="">Sin asignar</option>';
            for (let i = 1; i <= appState.tournament.groups; i++) {
                const groupName = `Grupo ${String.fromCharCode(64 + i)}`;
                dom.playerGroupSelect.innerHTML += `<option value="${groupName}">${groupName}</option>`;
            }
        }

        function renderAdminPlayersList() {
            dom.playersListContainer.innerHTML = appState.teams.map(team => `
                <div class="flex justify-between items-center bg-gray-800 p-3 rounded-lg">
                    <div>
                        <p class="font-bold text-white">${team.name} <span class="text-xs text-gray-400 font-normal">(${team.group || 'Sin grupo'})</span></p>
                        <p class="text-sm text-gray-300">${team.player1} / ${team.player2}</p>
                    </div>
                    <button class="delete-team-btn text-red-500 hover:text-red-400" data-id="${team.id}">&times; Eliminar</button>
                </div>`).join('');
        }
        
        function renderAdminMatchesForms() {
            dom.adminMatchesContainer.innerHTML = '';
            if (appState.matches.length === 0) {
                dom.adminMatchesContainer.innerHTML = `<p class="text-center text-gray-400">No hay partidos para mostrar.</p>`;
                return;
            }
            appState.matches.forEach(match => {
                const team1 = findTeamById(match.team1Id);
                const team2 = findTeamById(match.team2Id);
                if (!team1 || !team2) return;
                
                const form = document.createElement('form');
                form.className = "update-match-form bg-gray-900 p-4 rounded-lg space-y-3";
                form.dataset.id = match.id;
                
                form.innerHTML = `
                    <p class="text-center font-bold text-white">${match.group} - Cancha ${match.court} (${match.time})</p>
                    <div class="grid grid-cols-3 items-center gap-2">
                        <label class="text-right text-gray-300">${team1.name}</label>
                        <input type="number" name="score1" value="${match.score1}" class="w-full text-center bg-gray-700 rounded-md p-1" ${match.completed ? 'disabled' : ''}>
                        <div class="text-sm text-gray-400">Resultado 1</div>
                    </div>
                    <div class="grid grid-cols-3 items-center gap-2">
                        <label class="text-right text-gray-300">${team2.name}</label>
                        <input type="number" name="score2" value="${match.score2}" class="w-full text-center bg-gray-700 rounded-md p-1" ${match.completed ? 'disabled' : ''}>
                        <div class="text-sm text-gray-400">Resultado 2</div>
                    </div>
                    <button type="submit" class="w-full py-2 rounded-lg ${match.completed ? 'bg-green-700 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700'}">
                        ${match.completed ? 'Guardado' : 'Guardar Resultado'}
                    </button>`;
                dom.adminMatchesContainer.appendChild(form);
            });
        }

        function saveState() {
            localStorage.setItem('padelTournamentState', JSON.stringify(appState));
        }

        function loadState() {
            const savedState = localStorage.getItem('padelTournamentState');
            if (savedState) appState = JSON.parse(savedState);
        }

        function findTeamById(id) {
            return appState.teams.find(t => t.id === id);
        }

        function calculateTeamStats(teamId) {
            const team = findTeamById(teamId);
            if (!team) return {};
            let stats = { id: team.id, name: team.name, group: team.group, played: 0, wins: 0, losses: 0, gamesFor: 0, gamesAgainst: 0, diff: 0, points: 0 };
            appState.matches.filter(m => (m.team1Id === teamId || m.team2Id === teamId) && m.completed).forEach(m => {
                stats.played++;
                const isTeam1 = m.team1Id === teamId;
                const scoreFor = isTeam1 ? m.score1 : m.score2;
                const scoreAgainst = isTeam1 ? m.score2 : m.score1;
                stats.gamesFor += scoreFor;
                stats.gamesAgainst += scoreAgainst;
                if (scoreFor > scoreAgainst) {
                    stats.wins++;
                    stats.points += 3;
                } else stats.losses++;
            });
            stats.diff = stats.gamesFor - stats.gamesAgainst;
            return stats;
        }
        
        function handleTabClick(container, e) {
            if (e.target.tagName === 'BUTTON') {
                container.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('tab-active');
                    btn.classList.add('text-gray-400', 'border-transparent');
                });
                e.target.classList.add('tab-active');
                e.target.classList.remove('text-gray-400', 'border-transparent');
                
                container.parentElement.querySelectorAll('.tab-inner-content').forEach(content => content.classList.add('hidden'));
                document.getElementById(`${container.id.replace('tabs', 'tab-content')}-${e.target.dataset.tab}`).classList.remove('hidden');
            }
        }

        dom.mainTabs.addEventListener('click', (e) => handleTabClick(dom.mainTabs, e));
        dom.adminTabs.addEventListener('click', (e) => handleTabClick(dom.adminTabs, e));

        dom.saveTournamentSettingsBtn.addEventListener('click', () => {
            appState.tournament.name = dom.tournamentNameInput.value;
            appState.tournament.date = dom.tournamentDateInput.value;
            appState.tournament.courts = parseInt(dom.courtCountInput.value);
            appState.tournament.groups = parseInt(dom.groupCountSelect.value);
            saveState();
            renderAll();
            alert('Configuración guardada!');
        });
        
        dom.addPlayerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            appState.teams.push({
                id: `t-${Date.now()}`,
                player1: dom.player1NameInput.value,
                player2: dom.player2NameInput.value,
                name: dom.teamNameInput.value,
                group: dom.playerGroupSelect.value
            });
            saveState();
            renderAll();
            dom.addPlayerForm.reset();
        });

        dom.playersListContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('delete-team-btn')) {
                const teamId = e.target.dataset.id;
                if (confirm('¿Seguro que quieres eliminar esta pareja?')) {
                    appState.teams = appState.teams.filter(t => t.id !== teamId);
                    appState.matches = appState.matches.filter(m => m.team1Id !== teamId && m.team2Id !== teamId);
                    saveState();
                    renderAll();
                }
            }
        });
        
        dom.generateGroupsBtn.addEventListener('click', () => {
            if (appState.teams.length === 0) return alert("Agrega parejas antes.");
            if (appState.matches.length > 0 && !confirm("Esto reiniciará los partidos. ¿Continuar?")) return;

            appState.matches = [];
            const shuffledTeams = [...appState.teams].sort(() => 0.5 - Math.random());
            shuffledTeams.forEach((team, index) => {
                team.group = `Grupo ${String.fromCharCode(64 + (index % appState.tournament.groups) + 1)}`;
            });

            for (let i = 1; i <= appState.tournament.groups; i++) {
                const groupName = `Grupo ${String.fromCharCode(64 + i)}`;
                const teamsInGroup = appState.teams.filter(t => t.group === groupName);
                for (let i = 0; i < teamsInGroup.length; i++) {
                    for (let j = i + 1; j < teamsInGroup.length; j++) {
                        appState.matches.push({ id: `m-${Date.now()}-${i}${j}`, group: groupName, team1Id: teamsInGroup[i].id, team2Id: teamsInGroup[j].id, score1: 0, score2: 0, court: 0, time: "00:00", completed: false });
                    }
                }
            }
            let courtCounter = 1; let time = new Date(); time.setHours(9, 0, 0, 0);
            appState.matches.forEach(match => {
                match.court = courtCounter;
                match.time = time.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
                courtCounter++;
                if (courtCounter > appState.tournament.courts) { courtCounter = 1; time.setMinutes(time.getMinutes() + 45); }
            });
            saveState(); renderAll(); alert('Grupos y partidos generados!');
        });
        
        dom.adminMatchesContainer.addEventListener('submit', (e) => {
            e.preventDefault();
            if (!e.target.classList.contains('update-match-form')) return;
            const matchId = e.target.dataset.id;
            const match = appState.matches.find(m => m.id === matchId);
            if (!match || match.completed) return;
            const score1 = parseInt(e.target.elements.score1.value);
            const score2 = parseInt(e.target.elements.score2.value);
            if (isNaN(score1) || isNaN(score2)) return alert("Resultado inválido.");
            match.score1 = score1; match.score2 = score2; match.completed = true;
            saveState(); renderAll();
        });
        
        dom.resetTournamentBtn.addEventListener('click', () => {
            if (confirm('¿ESTÁS SEGURO? Se borrarán todas las parejas y partidos.')) {
                appState.teams = []; appState.matches = [];
                saveState(); renderAll(); alert('Torneo reiniciado.');
            }
        });

        dom.adminLoginBtn.addEventListener('click', () => dom.loginModal.classList.remove('hidden'));
        dom.closeModalBtn.addEventListener('click', () => dom.loginModal.classList.add('hidden'));
        dom.logoutBtn.addEventListener('click', () => { appState.isAdmin = false; saveState(); renderAll(); });
        
        dom.loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const user = e.target.elements.username.value;
            const pass = e.target.elements.password.value;
            if (user === 'admin' && pass === 'admin') {
                appState.isAdmin = true;
                dom.loginModal.classList.add('hidden');
                dom.loginError.classList.add('hidden');
                saveState();
                renderAll();
            } else {
                dom.loginError.classList.remove('hidden');
            }
        });
        
        loadState();
        renderAll();
    }

    initializeTournamentModule();
});
</script>
</body>
</html>

